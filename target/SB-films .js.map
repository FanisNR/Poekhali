{"version":3,"sources":["../js/SB-films .js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/*\r\n\r\nconst blockFilmsWrapperSB = document.getElementById('block__films_genre');\r\nblockFilmsWrapperSB.innerHTML = '';\r\n\r\n\r\nfunction renderFilmblock(posterUrl, nameRu, id, year) {\r\n    const wrapperSF = document.createElement('div');\r\n    wrapperSF.classList.add('film_block_carousel');\r\n    const imgTag = document.createElement('img');\r\n    imgTag.src = posterUrl;\r\n    const wrap_block_carousel__img = document.createElement('div');\r\n    wrap_block_carousel__img.classList.add('wrap_block_carousel__img');\r\n    const film_block_wrap_other_films = document.createElement('div');\r\n    film_block_wrap_other_films.classList.add('film_block_wrap_other_films');\r\n    const name_block_film = document.createElement('span');\r\n    name_block_film.classList.add('name_block_film');\r\n    const author_year_block_film = document.createElement('span');\r\n    author_year_block_film.classList.add('author_year_block_film');\r\n    name_block_film.textContent = nameRu;\r\n\r\n    //playbillSubtitle.textContent = '...Ждите';\r\n    wrapperSF.href = `/single/?id=${id}`;\r\n    wrapperSF.append(wrap_block_carousel__img);\r\n    wrapperSF.append(film_block_wrap_other_films);\r\n    wrap_block_carousel__img.append(imgTag);\r\n    film_block_wrap_other_films.append(name_block_film, author_year_block_film);  \r\n    \r\n\r\n\r\n    return [wrapperSF];  \r\n}\r\n\r\nconst fetchBlockFilmsSB = async () => {\r\n    const resultSB = await topFilmsRequest()\r\n\r\n    const dataSB = await resultSB.json();\r\n\r\n    const requestSB = [];\r\n    const filmblocksMap = new Map();\r\n\r\n    dataSB.films.forEach(async (film) => {\r\n        const [filmblock, playbillSubtitle] = renderFilmblock(`url(${film.posterUrlPreview})`, film.nameRu, film.filmId)\r\n        \r\n        filmblocksMap.set(film.filmId, filmblock)\r\n\r\n        requestSB.push(new Promise(async(resolve, reject) => {\r\n            const detailResultSB = await filmsDetailsRequest(film.filmId);\r\n            const detailsDataS = await detailResultSB.json();\r\n\r\n            const description = detailsDataSB.data.description;\r\n            \r\n         \r\n            if(!description) {\r\n                filmblocksMap.delete(film.filmId);\r\n            } else {\r\n                playbillSubtitle.textContent = description;\r\n            }\r\n            resolve();\r\n        })); \r\n        \r\n    })\r\n    await Promise.all(request);\r\n    \r\n    const elements = [...filmblocksMap.values()].slice(0, 9);\r\n\r\n    blockFilmsWrapperSB.append(...elements);\r\n}\r\n\r\nfetchBlockFilmsSB();\r\n\r\n\r\n*/"],"file":"SB-films .js"}