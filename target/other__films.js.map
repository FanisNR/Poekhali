{"version":3,"sources":["../js/other__films.js"],"names":["blockFilmsWrapperOther","document","getElementById","innerHTML","renderFilmblock","posterUrl","nameRu","id","year","distributors","wrapperOther","createElement","classList","add","wrap_block_carousel__img","imgTag","src","film_block_wrap_other_films","name_block_film","author_year_block_film","textContent","href","append","fetchBlockFilmsSF","topFilmsRequest","resultSF","json","data","requestSF","filmblocksMapSF","Map","films","forEach","film","posterUrlPreview","filmId","filmblock","playbillSubtitle","set","push","Promise","resolve","reject","filmsDetailsRequest","detailResult","detailsData","description","all","elements","values","slice"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,sBAAsB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,4BAAxB,CAA/B;AACAF,sBAAsB,CAACG,SAAvB,GAAmC,EAAnC;;AAGA,SAASC,eAAT,CAAyBC,SAAzB,EAAoCC,MAApC,EAA4CC,EAA5C,EAAgDC,IAAhD,EAAsDC,YAAtD,EAAoE;AAChE,MAAMC,YAAY,GAAGT,QAAQ,CAACU,aAAT,CAAuB,KAAvB,CAArB;AACAD,EAAAA,YAAY,CAACE,SAAb,CAAuBC,GAAvB,CAA2B,qBAA3B;AAEA,MAAMC,wBAAwB,GAAGb,QAAQ,CAACU,aAAT,CAAuB,KAAvB,CAAjC;AACAG,EAAAA,wBAAwB,CAACF,SAAzB,CAAmCC,GAAnC,CAAuC,0BAAvC;AAEA,MAAME,MAAM,GAAGd,QAAQ,CAACU,aAAT,CAAuB,KAAvB,CAAf;AACAI,EAAAA,MAAM,CAACC,GAAP,GAAaX,SAAb;AAEA,MAAMY,2BAA2B,GAAGhB,QAAQ,CAACU,aAAT,CAAuB,KAAvB,CAApC;AACAM,EAAAA,2BAA2B,CAACL,SAA5B,CAAsCC,GAAtC,CAA0C,6BAA1C;AAEA,MAAMK,eAAe,GAAGjB,QAAQ,CAACU,aAAT,CAAuB,MAAvB,CAAxB;AACAO,EAAAA,eAAe,CAACN,SAAhB,CAA0BC,GAA1B,CAA8B,iBAA9B;AACA,MAAMM,sBAAsB,GAAGlB,QAAQ,CAACU,aAAT,CAAuB,MAAvB,CAA/B;AACAQ,EAAAA,sBAAsB,CAACP,SAAvB,CAAiCC,GAAjC,CAAqC,wBAArC;AACAK,EAAAA,eAAe,CAACE,WAAhB,GAA8Bd,MAA9B;AACAa,EAAAA,sBAAsB,CAACC,WAAvB,GAAqCZ,IAArC,EAA2CC,YAA3C;AAEAC,EAAAA,YAAY,CAACW,IAAb,yBAAmCd,EAAnC;AACAG,EAAAA,YAAY,CAACY,MAAb,CAAoBR,wBAApB;AACAJ,EAAAA,YAAY,CAACY,MAAb,CAAoBL,2BAApB;AACAH,EAAAA,wBAAwB,CAACQ,MAAzB,CAAgCP,MAAhC;AACAE,EAAAA,2BAA2B,CAACK,MAA5B,CAAmCJ,eAAnC;AACAD,EAAAA,2BAA2B,CAACK,MAA5B,CAAmCH,sBAAnC;AAIA,SAAO,CAACT,YAAD,EAAeO,2BAAf,CAAP;AACH;;AAED,IAAMM,iBAAiB;AAAA,qEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACCC,eAAe,EADhB;;AAAA;AAChBC,YAAAA,QADgB;AAAA;AAAA,mBAGHA,QAAQ,CAACC,IAAT,EAHG;;AAAA;AAGhBC,YAAAA,IAHgB;AAKhBC,YAAAA,SALgB,GAKJ,EALI;AAMhBC,YAAAA,eANgB,GAME,IAAIC,GAAJ,EANF;AAQtBH,YAAAA,IAAI,CAACI,KAAL,CAAWC,OAAX;AAAA,kFAAmB,kBAAOC,IAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2CACuB7B,eAAe,eAAQ6B,IAAI,CAACC,gBAAb,QAAkCD,IAAI,CAAC3B,MAAvC,EAA+C2B,IAAI,CAACE,MAApD,CADtC,2DACRC,SADQ,yBACGC,gBADH;AAGfR,wBAAAA,eAAe,CAACS,GAAhB,CAAoBL,IAAI,CAACE,MAAzB,EAAiCC,SAAjC;AAEAR,wBAAAA,SAAS,CAACW,IAAV,CAAe,IAAIC,OAAJ;AAAA,8FAAY,iBAAMC,OAAN,EAAeC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACIC,mBAAmB,CAACV,IAAI,CAACE,MAAN,CADvB;;AAAA;AACjBS,oCAAAA,YADiB;AAAA;AAAA,2CAEGA,YAAY,CAAClB,IAAb,EAFH;;AAAA;AAEjBmB,oCAAAA,WAFiB;AAIjBC,oCAAAA,WAJiB,GAIHD,WAAW,CAAClB,IAAZ,CAAiBmB,WAJd;;AAOvB,wCAAG,CAACA,WAAJ,EAAiB;AACbjB,sCAAAA,eAAe,UAAf,CAAuBI,IAAI,CAACE,MAA5B;AACH,qCAFD,MAEO;AACHE,sCAAAA,gBAAgB,CAACjB,WAAjB,GAA+B0B,WAA/B;AACH;;AACDL,oCAAAA,OAAO;;AAZgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAZ;;AAAA;AAAA;AAAA;AAAA,4BAAf;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAnB;;AAAA;AAAA;AAAA;AAAA;AARsB;AAAA,mBA6BhBD,OAAO,CAACO,GAAR,CAAYnB,SAAZ,CA7BgB;;AAAA;AA+BhBoB,YAAAA,QA/BgB,GA+BL,mBAAInB,eAAe,CAACoB,MAAhB,EAAJ,EAA8BC,KAA9B,CAAoC,CAApC,EAAuC,CAAvC,CA/BK;AAiCtBlD,YAAAA,sBAAsB,CAACsB,MAAvB,OAAAtB,sBAAsB,qBAAWgD,QAAX,EAAtB;;AAjCsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAjBzB,iBAAiB;AAAA;AAAA;AAAA,GAAvB;;AAoCAA,iBAAiB","sourcesContent":["const blockFilmsWrapperOther = document.getElementById('other__films__wrapperOther');\r\nblockFilmsWrapperOther.innerHTML = '';\r\n\r\n\r\nfunction renderFilmblock(posterUrl, nameRu, id, year, distributors) {\r\n    const wrapperOther = document.createElement('div');\r\n    wrapperOther.classList.add('film_block_carousel');\r\n     \r\n    const wrap_block_carousel__img = document.createElement('div');\r\n    wrap_block_carousel__img.classList.add('wrap_block_carousel__img');\r\n\r\n    const imgTag = document.createElement('img');\r\n    imgTag.src = posterUrl;\r\n\r\n    const film_block_wrap_other_films = document.createElement('div');\r\n    film_block_wrap_other_films.classList.add('film_block_wrap_other_films');\r\n\r\n    const name_block_film = document.createElement('span');\r\n    name_block_film.classList.add('name_block_film');\r\n    const author_year_block_film = document.createElement('span');\r\n    author_year_block_film.classList.add('author_year_block_film');\r\n    name_block_film.textContent = nameRu;\r\n    author_year_block_film.textContent = year, distributors;\r\n\r\n    wrapperOther.href = `/single/?id=${id}`;\r\n    wrapperOther.append(wrap_block_carousel__img);\r\n    wrapperOther.append(film_block_wrap_other_films);\r\n    wrap_block_carousel__img.append(imgTag);\r\n    film_block_wrap_other_films.append(name_block_film);  \r\n    film_block_wrap_other_films.append(author_year_block_film);  \r\n    \r\n\r\n\r\n    return [wrapperOther, film_block_wrap_other_films];  \r\n}\r\n\r\nconst fetchBlockFilmsSF = async () => {\r\n    const resultSF = await topFilmsRequest()\r\n\r\n    const data = await resultSF.json();\r\n\r\n    const requestSF = [];\r\n    const filmblocksMapSF = new Map();\r\n\r\n    data.films.forEach(async (film) => {\r\n        const [filmblock, playbillSubtitle] = renderFilmblock(`url(${film.posterUrlPreview})`, film.nameRu, film.filmId)\r\n        \r\n        filmblocksMapSF.set(film.filmId, filmblock)\r\n\r\n        requestSF.push(new Promise(async(resolve, reject) => {\r\n            const detailResult = await filmsDetailsRequest(film.filmId);\r\n            const detailsData = await detailResult.json();\r\n\r\n            const description = detailsData.data.description;\r\n            \r\n         \r\n            if(!description) {\r\n                filmblocksMapSF.delete(film.filmId);\r\n            } else {\r\n                playbillSubtitle.textContent = description;\r\n            }\r\n            resolve();\r\n        })); \r\n        \r\n    })\r\n    await Promise.all(requestSF);\r\n    \r\n    const elements = [...filmblocksMapSF.values()].slice(0, 9);\r\n\r\n    blockFilmsWrapperOther.append(...elements);\r\n}\r\n\r\nfetchBlockFilmsSF();\r\n"],"file":"other__films.js"}